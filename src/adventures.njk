---
title: All Adventures
layout: layouts/base.njk
permalink: /adventures/
---

<section class="container">
  <h1>All Adventures</h1>

  <!-- Filter & search -->
  <div class="aa-filter" role="region" aria-label="Filter adventures">
    <div class="aa-filter__scroller" role="tablist" aria-label="Categories">
      <button type="button" class="chip" data-filter="all" aria-pressed="true">All</button>
      <button type="button" class="chip" data-filter="nature">Nature</button>
      <button type="button" class="chip" data-filter="days out">Days Out</button>
      <button type="button" class="chip" data-filter="holidays">Holidays</button>
      <button type="button" class="chip" data-filter="fun stuff">Fun Stuff</button>
    </div>

    <div class="aa-filter__search">
      <label for="aa-q" class="sr-only">Search adventures</label>
      <input id="aa-q" type="search" placeholder="Search adventuresâ€¦" aria-label="Search adventures">
    </div>
  </div>

  <!-- Cards grid -->
  <div id="aa-grid" class="aa-grid">
    {% for p in collections.posts | reverse %}
      {% set cover    = p.data.cover or '/images/sample.jpg' %}
      {% set tagsList = p.data.tags or [] %}
      {% set firstTag = '' %}
      {% if tagsList | length %}
        {% set firstTag = tagsList[0] %}
      {% endif %}

      <div class="aa-cardwrap"
           data-tags="{{ tagsList | join(',') | lower }}"
           data-title="{{ (p.data.title or '') | lower }}"
           data-excerpt="{{ (p.data.excerpt or '') | lower }}">

        <a class="aa-card" href="{{ p.url }}">
          <div class="aa-card__media">
            <img src="{{ cover }}" alt="">
          </div>

          <div class="aa-card__body">
            <div class="aa-card__toprow">
              {% if firstTag %}
                <span class="aa-pill">{{ firstTag }}</span>
              {% endif %}
              <span class="aa-meta">{{ p.templateContent | readTime }}</span>
            </div>

            <h3 class="aa-card__title">{{ p.data.title }}</h3>

            {% if p.data.excerpt %}
              <p class="aa-card__excerpt">{{ p.data.excerpt }}</p>
            {% endif %}

            <div class="aa-card__meta">
              <span class="aa-meta">{{ p.date | date("dd/MM/yyyy") }}</span>
            </div>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>

  <p id="aa-empty" class="aa-empty" hidden>No adventures match your filter.</p>
  <noscript><p class="aa-empty">Enable JavaScript to use filters/search.</p></noscript>
</section>

<script>
  (function () {
    const wraps = Array.from(document.querySelectorAll('#aa-grid .aa-cardwrap'));
    const chips = Array.from(document.querySelectorAll('.aa-filter .chip'));
    const q = document.getElementById('aa-q');
    const empty = document.getElementById('aa-empty');

    function activeTag() {
      const active = chips.find(c => c.getAttribute('aria-pressed') === 'true');
      return active ? active.dataset.filter : 'all';
    }

    function applyFilters() {
      const tag = activeTag();
      const query = (q.value || '').trim().toLowerCase();
      let visible = 0;

      wraps.forEach(w => {
        const tags = (w.dataset.tags || '');
        const title = (w.dataset.title || '');
        const excerpt = (w.dataset.excerpt || '');
        const tagMatch  = (tag === 'all') || tags.split(',').includes(tag);
        const textMatch = !query || title.includes(query) || excerpt.includes(query);
        const show = tagMatch && textMatch;
        w.style.display = show ? '' : 'none';
        if (show) visible++;
      });

      empty.hidden = visible !== 0;
    }

    chips.forEach(chip => {
      chip.addEventListener('click', () => {
        chips.forEach(c => c.setAttribute('aria-pressed', 'false'));
        chip.setAttribute('aria-pressed', 'true');
        applyFilters();
      });
    });

    q.addEventListener('input', applyFilters);
    applyFilters(); // show everything on load
  })();
</script>
