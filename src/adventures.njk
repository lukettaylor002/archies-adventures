---
title: All Adventures
layout: layouts/base.njk
permalink: /adventures/
---

<section class="container">
  <h1>All Adventures</h1>

  <!-- Filter bar -->
  <div class="aa-filterbar">
    <div class="aa-chips">
      <button class="chip" data-filter="all" aria-pressed="true">All</button>
      <button class="chip" data-filter="nature">Nature</button>
      <button class="chip" data-filter="days out">Days Out</button>
      <button class="chip" data-filter="holidays">Holidays</button>
      <button class="chip" data-filter="fun stuff">Fun Stuff</button>
    </div>

    <input id="aa-q" class="aa-search" type="search" placeholder="Search adventuresâ€¦" aria-label="Search adventures">
  </div>

  <!-- Cards -->
  <div id="cards" class="aa-grid">
    {% for post in collections.posts | reverse %}
      {% set cover = post.data.cover or '/images/sample.jpg' %}
      {% set tags = (post.data.tags or []) | join(',') | lower %}

      <a class="aa-card"
         href="{{ post.url }}"
         data-post-tags="{{ tags }}"
         data-post-title="{{ post.data.title | lower }}"
         data-post-excerpt="{{ (post.data.excerpt or '') | lower }}">

        <div class="aa-card__media">
          <img src="{{ cover }}" alt="">
        </div>

        <div class="aa-card__body">
          <div class="aa-card__toprow">
            {% if post.data.tags and post.data.tags.length %}
              <span class="aa-pill">{{ post.data.tags[0] }}</span>
            {% endif %}
            <span class="aa-meta">{{ post.templateContent | readTime }}</span>
          </div>

          <h3 class="aa-card__title">{{ post.data.title }}</h3>

          {% if post.data.excerpt %}
            <p class="aa-card__excerpt">{{ post.data.excerpt }}</p>
          {% endif %}

          <div class="aa-card__meta">
            <span class="aa-meta">{{ post.date | date("dd/MM/yyyy") }}</span>
          </div>
        </div>
      </a>
    {% endfor %}
  </div>

  {% if collections.posts | length == 0 %}
    <p>No adventures yet. Check back soon!</p>
  {% endif %}
</section>

<script>
  (function () {
    const cards = Array.from(document.querySelectorAll('#cards .aa-card'));
    const chips = Array.from(document.querySelectorAll('.aa-chips .chip'));
    const q = document.getElementById('aa-q');

    function applyFilters() {
      const active = chips.find(c => c.getAttribute('aria-pressed') === 'true');
      const tag = active ? active.dataset.filter : 'all';
      const query = (q.value || '').trim().toLowerCase();

      cards.forEach(card => {
        const tags = card.dataset.postTags || '';
        const title = card.dataset.postTitle || '';
        const excerpt = card.dataset.postExcerpt || '';
        const tagMatch = (tag === 'all') || tags.split(',').includes(tag);
        const textMatch = !query || title.includes(query) || excerpt.includes(query);
        card.style.display = (tagMatch && textMatch) ? '' : 'none';
      });
    }

    chips.forEach(chip => {
      chip.addEventListener('click', () => {
        chips.forEach(c => c.setAttribute('aria-pressed', 'false'));
        chip.setAttribute('aria-pressed', 'true');
        applyFilters();
      });
    });

    q.addEventListener('input', applyFilters);

    // show everything by default
    applyFilters();
  })();
</script>
