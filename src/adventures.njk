---
title: All Adventures
layout: layouts/base.njk
permalink: /adventures/
---

<section class="container">
  <h1>All Adventures</h1>

  <!-- Filter bar -->
  <div class="aa-filter">
    <div class="aa-filter__scroller">
      <button type="button" class="chip" data-filter="all" aria-pressed="true">All</button>
      <button type="button" class="chip" data-filter="nature">Nature</button>
      <button type="button" class="chip" data-filter="days out">Days Out</button>
      <button type="button" class="chip" data-filter="holidays">Holidays</button>
      <button type="button" class="chip" data-filter="fun stuff">Fun Stuff</button>
    </div>

    <div class="aa-filter__search">
      <input id="aa-q" type="search" placeholder="Search adventuresâ€¦" aria-label="Search adventures">
    </div>
  </div>

  <!-- Cards grid -->
  <div id="aa-grid" class="aa-grid">
    {# Wrap each card so the filter can show/hide them #}
    {% for p in collections.posts | reverse %}
      <div class="aa-cardwrap"
           data-tags="{{ (p.data.tags or []) | join(',') | lower }}"
           data-title="{{ (p.data.title or '') | lower }}"
           data-excerpt="{{ (p.data.excerpt or '') | lower }}">
        {% include "partials/card.njk" post=p %}
      </div>
    {% endfor %}
  </div>

  <p id="aa-empty" class="aa-empty" hidden>No adventures match your filter.</p>
</section>

<script>
(function(){
  const chips  = document.querySelectorAll('.aa-filter__scroller .chip');
  const q      = document.querySelector('#aa-q');
  const wraps  = document.querySelectorAll('.aa-cardwrap');
  const empty  = document.querySelector('#aa-empty');

  let active = 'all';
  let term = '';

  function apply(){
    let shown = 0;
    wraps.forEach(w => {
      const tags    = (w.dataset.tags||'');
      const title   = (w.dataset.title||'');
      const excerpt = (w.dataset.excerpt||'');

      const tagOk  = active === 'all' || tags.split(',').includes(active);
      const textOk = !term || title.includes(term) || excerpt.includes(term) || tags.includes(term);

      const vis = tagOk && textOk;
      w.style.display = vis ? '' : 'none';
      if (vis) shown++;
    });
    empty.hidden = shown !== 0;
  }

  chips.forEach(c => {
    c.addEventListener('click', () => {
      chips.forEach(b => b.setAttribute('aria-pressed','false'));
      c.setAttribute('aria-pressed','true');
      active = (c.dataset.filter || 'all').toLowerCase();
      apply();
    });
  });

  q?.addEventListener('input', e => {
    term = (e.target.value || '').toLowerCase().trim();
    apply();
  });

  // Show everything on first load
  apply();
})();
</script>
